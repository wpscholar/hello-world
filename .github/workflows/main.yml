name: Trigger Satis Build

on:
  release:
    types:
      - created

jobs:
  webhook:
    name: Send Webhook
    runs-on: ubuntu-latest
    steps:

    - name: Repository Dispatch
      uses: peter-evans/repository-dispatch@v1
      with:
        token: ${{ secrets.WEBHOOK_TOKEN }}
        repository: wpscholar/satis
        event-type: trigger-satis-build
        client-payload: >-
          {
            "ref": "${{ github.ref }}",
            "sha": "${{ github.sha }}",
            "vendor": "wpscholar",
            "package": "hello-world",
            "version": "${{ github.event.release.id }}"
          }
